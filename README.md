# Telegram Relay Bot

Бот-посредник для проектов по разработке сайтов: связывает два групповых чата (заказчики и исполнители) в один проект и пересылает сообщения между ними от имени бота.

## Возможности
- Создание проектов с указанием slug.
- Привязка чата заказчиков и чата исполнителей к проекту.
- Просмотр информации о текущем чате и списка проектов.
- Пересылка сообщений (текст, документы, фото, голосовые, аудио, видео) между чатами без раскрытия отправителя; подписи к вложениям отправляются отдельным сообщением следом за медиавложением.

## Команды
- `/create_project <slug>` — только админ; выполнить в чате исполнителей.
- `/bind_customer <slug>` — только админ; выполнить в чате заказчиков.
- `/project_info` — информация о проекте для текущего чата.
- `/list_projects` — только админ; список всех проектов.
- `/unlink_project <slug>` — только админ; отвязать текущий чат и деактивировать проект.

## Конфигурация
Настройки читаются из переменных окружения:
- `BOT_TOKEN` — токен Telegram-бота (обязательно).
- `ADMIN_USER_ID` — Telegram ID администратора (Таня / @askeditme). Если не задан, используется значение константы в `config.py`.
- `DB_PATH` — путь к файлу SQLite (по умолчанию `projects.db`).

## Запуск локально
```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
export BOT_TOKEN=XXXX
export ADMIN_USER_ID=YYYY
python main.py
```
Бот работает через long polling, вебхуки не используются.

## Деплой на Railway
1. Создайте новый проект на Railway и добавьте переменные окружения `BOT_TOKEN`, `ADMIN_USER_ID`, (опционально) `DB_PATH`.
2. В разделе Deployments укажите команду запуска: `python main.py`.
3. Хранилище SQLite будет сохранено в файле `projects.db` (или указанном пути). При необходимости можно заменить реализацию хранилища в `storage.py`.
